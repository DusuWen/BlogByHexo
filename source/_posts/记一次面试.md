---
title: 记一次面试
date: 2019-05-30 19:24:35
tags:
---
### Javascript的几种数据类型

最新的ECMAScript标准定义了7中数据类型：

- 6种原始类型
  - Boolean
  - Null
  - Undefined
  - Numer
  - String
  - Symbol(ECMAScript6 新定义)
- 和Object

### 如何判断一个Javascript Object

- typeof 操作符
- instanceof运算符
- Object.prototype.toString.call()
- constructor

### Vue实现数据绑定的原理

当把一个javascript对象传递给vue实例的data选项时，vue将遍历这个对象的所有属性，并使用object.defineProperty把这些属性转变为getter和settter。每个组件实例都有相应的watch实例对象，它会在组件渲染过程中把属性记录为依赖，当依赖的setter被调用时，会通知watcher重新计算，然后组件会重新渲染。

注意事项

- Vue不能检测到对象属性的添加或删除
- Vue不允许动态添加根基响应式属性

对于第一个问题可以采用`Vue.set(object, key, value)`方法来条线响应属性。对于第二个问题，只能在初始化实例前声明根级响应式属性，哪怕只是一个空值。

### 为什么vue 组件里 data 必须是一个function
因为每一次使用新的组件，都会有一个新的实例被创建，一个组件的data必须是一个函数，因此每个实例可以维护一份被返回对象的独立的拷贝

###Proxy相比Object.defineProperty的优势是什么
Object.defineProperty的问题主要有三个
- 不能监听数组的变化
- 必须遍历对象的每个属性
- 必须深层遍历嵌套的对象

Proxy的几个特点
- 针对对象
- 支持数组
- 支持13种拦截方式
- 作为新标准收到浏览器厂商的重点关注和性能优化

### computed与methods

计算属性是基于他们的依赖进行缓存的，只有在相关依赖发生改变时才会重新求值。相比之下，每当触发重新渲染时，调用方法将总会再次执行函数。

### http状态码

- 1xx消息
- 2xx成功
- 3xx重定向
- 4xx客户端错误
- 5xx服务器错误

### cookie和session 的区别

- 存取方式的不同
- 隐私策略的不同
- 有效期上的不同
- 服务器压力的不同
- 浏览器支持的不同
- 跨域支持上的不同

### Promise 链式调用

《ECMAScript 6 入门》一书中，阮一峰在[Promise对象](http://es6.ruanyifeng.com/#docs/promise)介绍Promise 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。

`then`方法接受两个参数，第一个是`resolved`状态的回调函数，第二个（可选）是rejected状态的回调函数。同时，`then`方法返回一个新的Promise实例，因此可以采用链式写法，在一个`then`后再掉调用一个`then`，而后一个then方法依旧可以接受两个参数的。

```javascript
getJSON("/post/1.json").then(function(post) {
  return getJSON(post.commentURL);
}).then(function funcA(comments) {
  console.log("resolved: ", comments);
}, function funcB(err){
  console.log("rejected: ", err);
});
```

需要注意的是，一般使用`Promise`时总是配合`catch`方法使用，所以，此时不要在`then`方法里面定义Reject状态的回调函数，直接使用`catch`方法。好处是，`catch`方法总是可以捕获到在`then`方法执行过程中产生的Error，有利于后期排查。

```javascript
// bad
promise
  .then(function(data) {
    // success
  }, function(err) {
    // error
  });

// good
promise
  .then(function(data) { //cb
    // success
  })
  .catch(function(err) {
    // error
  });
```

一般总是建议，Promise 对象后面要跟`catch`方法，这样可以处理 Promise 内部发生的错误。`catch`方法返回的还是一个 Promise 对象，因此后面还可以接着调用`then`方法。而且，`catch`方法之后还可以继续执行`then`方法，甚至`catch`方法之后还可以执行`catch`方法。

在调用`then`方法实现链式调用时需要特别注意如何处理错误，没有`catch`住的错误会被`Promise`’吃掉‘

### Vue中对Array的检测做了什么特殊处理

在Vue.js官方文档中有一章[数组更新检测](https://cn.vuejs.org/v2/guide/list.html)中提到Vue包含一组观察数组的变异方法，使用这些方法才可以触发视图更新，文档中介绍的比如`push（）`方法其实不是Array本身的原生方法，而是Vue经过二次包装的方法，因此这类变异方法才得以实现更新数据的同时触发试图更新，除了变异方法外，还有替换数组的方法。

同时，文档中提到，由于Javascript的限制

- 利用索引直接设置一个项
- 直接修改数组长度

都不会触发视图更新，需要使用`vm.$set`和`splice`方法

